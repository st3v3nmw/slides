import{_ as A}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-Dc9mCjNf.js";import{e as d}from"./modules/unplugin-icons-KYtC6kB4.js";import{o as g,c as B,k,e as i,ac as t,l as h,m as l,q as o,s as y,B as e}from"./modules/vue-erlImCx6.js";import{I as D}from"./slidev/default-DNyDrW-X.js";import{u as C,f as u}from"./slidev/context-1HTcGq0r.js";import"./index-LlaKh1ls.js";import"./modules/shiki-D1jugA53.js";const m={style:{"margin-right":"20px"},class:"text-green-400"},N={__name:"slides.md__slidev_22",setup(f){const{$slidev:E,$nav:c,$clicksContext:n,$clicks:L,$page:F,$renderContext:b,$frontmatter:r}=C();return n.setup(),(T,s)=>{const p=d,a=A;return g(),B(D,o(y(e(u)(e(r),21))),{default:k(()=>[s[3]||(s[3]=i("h1",null,"SELECT COUNT(*) Estimates",-1)),s[4]||(s[4]=i("p",null,[t("Introducing "),i("code",null,"TABLESAMPLE SYSTEM/BERNOULLI (n)"),t(" ðŸ¥")],-1)),i("p",null,[i("i",m,[h(p),s[0]||(s[0]=t("11.50ms"))])]),s[5]||(s[5]=i("h4",null,"But can we do better? Yes!",-1)),s[6]||(s[6]=i("blockquote",null,[i("p",null,[t("The "),i("code",null,"TABLESAMPLE SYSTEM/BERNOULLI"),t(" method returns an approximate percentage of rows. It generates a random number for each physical storage page for the underlying relation. Based on this random number and the sampling percentage specified, it either includes or exclude the corresponding storage page. If that page is included, the whole page will be returned in the result set."),i("br"),t(" ~ "),i("a",{href:"https://wiki.postgresql.org/wiki/TABLESAMPLE_Implementation",target:"_blank"},"https://wiki.postgresql.org/wiki/TABLESAMPLE_Implementation")])],-1)),s[7]||(s[7]=i("br",null,null,-1)),h(a,l({},{ranges:[]}),{default:k(()=>s[1]||(s[1]=[i("pre",{class:"shiki shiki-themes Vitesse Dark Vitesse Light slidev-code",style:{"--shiki-dark":"#dbd7ca","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-sql"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"SELECT"),i("span",{style:{"--shiki-dark":"#E0A569","--shiki-light":"#B58451"}}," COUNT"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"("),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"*"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},") "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"AS"),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},' "__count"'),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}}," FROM"),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},' "weave_message"'),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," TABLESAMPLE BERNOULLI ("),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"10"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},") "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"REPEATABLE"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," ("),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"42"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},")")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"WHERE"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}}," NOT"),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},' "weave_message"'),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"deleted"')]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"# Average "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"output"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}}," from"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," several runs "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}}," 90"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},","),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"122"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"5"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"; Correct "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}}," 89"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},","),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"964")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"# "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"Off"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}}," by"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," ONLY "),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"0"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"18"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"%")])])],-1)])),_:1},16),s[8]||(s[8]=i("br",null,null,-1)),s[9]||(s[9]=i("h4",null,"Query Plan",-1)),h(a,l({},{ranges:[]}),{default:k(()=>s[2]||(s[2]=[i("pre",{class:"shiki shiki-themes Vitesse Dark Vitesse Light slidev-code",style:{"--shiki-dark":"#dbd7ca","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-sql"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}},"Aggregate"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," (cost"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"1801"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"50"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},".."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"1801"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"51"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}}," rows"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"1"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," width"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"8"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},") (actual "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"time="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"11"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"505"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},".."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"11"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"."),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"506"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1C6B48"}}," rows"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"1"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," loops"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"="),i("span",{style:{"--shiki-dark":"#6394BF","--shiki-light":"#296AA3"}},"1"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},")")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}},"# Original "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"time"),i("span",{style:{"--shiki-dark":"#DBD7CA","--shiki-light":"#393A34"}}," taken: Around 25ms")])])],-1)])),_:1},16)]),_:1},16)}}};export{N as default};
